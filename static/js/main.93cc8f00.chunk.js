(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{65:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(9),o=n.n(r),s=(n(39),n(14)),i=n(15),u=n(17),l=n(16),d=n(5),j=n(20),b=n.n(j),f=n(8),h=n(33),O=n(7),m=n.n(O),p=function(){var e=Object(h.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=navigator.userAgent,e.next=3,m.a.get("https://61fb905c87801d0017a2c5b6.mockapi.io/users").then((function(e){var n=e.data;return Boolean(Object.keys(n).find((function(e){return n[e].device===t})))}));case 3:n=e.sent,Promise.all([n]).then((function(e){!e[0]&&m.a.get("https://api.freegeoip.app/json/?apikey=38ceddc0-85de-11ec-9c74-d7dbe11d9622").then((function(e){var n=e.data;return m.a.post("https://61fb905c87801d0017a2c5b6.mockapi.io/users",Object(f.a)({device:t},n))}))}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=n(2),x=(n(65),n(11)),g=n(10),y=(n(30),n(31),n(3));m.a.defaults.baseURL="https://61fb905c87801d0017a2c5b6.mockapi.io";var C=Object(y.c)("contacts/getContact",(function(e,t){var n=t.rejectWithValue;return m.a.get("/contacts").then((function(e){return e.data})).catch((function(e){var t=e.message;return n(t)}))})),_=Object(y.c)("contacts/addContact",(function(e,t){var n=t.rejectWithValue;return m.a.post("/contacts",e).then((function(e){var t=e.data;return Object(g.info)({text:"Contact successfully added",delay:700}),t})).catch((function(e){var t=e.message;return n(t)}))})),N=Object(y.c)("contacts/deleteContact",(function(e,t){var n=t.rejectWithValue;return m.a.delete("/contacts/".concat(e)).then((function(e){var t=e.data;return Object(g.info)({text:"Contact successfully deleted",delay:700}),t.id})).catch((function(e){var t=e.message;return n(t)}))})),w=n(1),k={name:"",number:""},L=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var c=arguments.length,a=new Array(c),r=0;r<c;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state=Object(f.a)({},k),e.nameId=Object(x.a)(),e.numberId=Object(x.a)(),e.reset=function(){return e.setState(Object(f.a)({},k))},e.onInputHandler=function(t){var n=t.target,c=n.name,a=n.value;e.setState(Object(v.a)({},c,a))},e.addContact=function(t){e.props.contacts.length>=100?Object(g.info)({text:"Too many contacts now.",delay:700}):e.props.addContact(t)},e.onSubmitHandler=function(t){if(t.preventDefault(),e.props.contacts.find((function(t){return t.name===e.state.name})))Object(g.info)({text:"".concat(e.state.name," is already in contacts."),delay:700});else{var n={name:e.state.name,number:e.state.number,id:Object(x.a)()};e.addContact(n),e.reset()}},e}return Object(i.a)(n,[{key:"render",value:function(){return Object(w.jsxs)("form",{className:"form",onSubmit:this.onSubmitHandler,children:[Object(w.jsxs)("label",{className:"form__title",htmlFor:this.nameId,children:[Object(w.jsx)("h3",{className:"phonebook__headline",children:"Name"}),Object(w.jsx)("input",{className:"form__input",type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",required:!0,id:this.nameId,value:this.state.name,onChange:this.onInputHandler})]}),Object(w.jsxs)("label",{className:"form__title",htmlFor:this.numberId,children:[Object(w.jsx)("h3",{className:"phonebook__headline",children:"Number"}),Object(w.jsx)("input",{className:"form__input",type:"tel",name:"number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",required:!0,id:this.numberId,value:this.state.number,onChange:this.onInputHandler})]}),Object(w.jsx)("button",{className:"form__submit",type:"submit",children:"Add contact"})]})}}]),n}(c.Component),I=Object(d.b)((function(e){return{contacts:e.contacts.items}}),(function(e){return{addContact:function(t){return e(_(t))}}}))(L);n(68),n(69);function A(e){var t=e.name,n=e.number,c=e.deleteContact;return Object(w.jsxs)("li",{className:"list__item",children:[Object(w.jsxs)("p",{className:"list__text",children:[Object(w.jsxs)("span",{children:[t," :"]})," ",n]}),Object(w.jsx)("button",{className:"list__btn",onClick:c,type:"button",children:"Delete"})]})}var F,S,H,z=n(6),M=n(21),P=Object(y.d)([],(F={},Object(v.a)(F,_.fulfilled,(function(e,t){return[t.payload].concat(Object(M.a)(e))})),Object(v.a)(F,N.fulfilled,(function(e,t){var n=t.payload;return Object(M.a)(e.filter((function(e){return e.id!==n})))})),Object(v.a)(F,C.fulfilled,(function(e,t){return t.payload})),F)),q=Object(y.d)(!1,(S={},Object(v.a)(S,_.pending,(function(){return!0})),Object(v.a)(S,_.rejected,(function(){return!1})),Object(v.a)(S,_.fulfilled,(function(){return!1})),Object(v.a)(S,N.pending,(function(){return!0})),Object(v.a)(S,N.rejected,(function(){return!1})),Object(v.a)(S,N.fulfilled,(function(){return!1})),Object(v.a)(S,C.pending,(function(){return!0})),Object(v.a)(S,C.rejected,(function(){return!1})),Object(v.a)(S,C.fulfilled,(function(){return!1})),S)),B=Object(y.d)("",(H={},Object(v.a)(H,_.pending,(function(){return""})),Object(v.a)(H,N.pending,(function(){return""})),Object(v.a)(H,C.pending,(function(){return""})),Object(v.a)(H,_.rejected,(function(e,t){return"Oops, we can't add contact. "+t.payload})),Object(v.a)(H,N.rejected,(function(e,t){return"Oops, we can't delete contact. "+t.payload})),Object(v.a)(H,C.rejected,(function(e,t){return"Oops, we can't load contacts. "+t.payload})),H)),D=Object(y.b)("contacts/filter"),J=Object(y.d)("",Object(v.a)({},D.type,(function(e,t){return t.payload}))),V=Object(z.b)({items:P,filter:J,loading:q,error:B}),W=function(e,t){return t.filter((function(t){return t.name.toLocaleLowerCase().includes(e.toLocaleLowerCase())}))};var Z=Object(d.b)((function(e){var t=e.contacts;return{contacts:W(t.filter,t.items)}}),(function(e){return{deleteContact:function(t){return e(N(t))},getContactList:function(){return e(C())}}}))((function(e){var t=e.contacts,n=e.deleteContact,a=e.getContactList;return Object(c.useEffect)((function(){return a()}),[a]),Object(w.jsxs)("ul",{className:"list",children:[console.log("render"),t.map((function(e){return Object(w.jsx)(A,{deleteContact:function(){return n(e.id)},name:e.name,number:e.number},e.id)}))]})})),E=(n(70),Object(x.a)());var T=Object(d.b)((function(e){return{value:e.contacts.filter}}),(function(e){return{onChange:function(t){var n=t.target;return e(D(n.value))}}}))((function(e){var t=e.onChange,n=e.value;return Object(w.jsxs)("div",{className:"filter",children:[Object(w.jsx)("h3",{className:"phonebook__headline",children:"Find contact by name"}),Object(w.jsx)("label",{className:"filter__title",htmlFor:E,children:Object(w.jsx)("input",{value:n,onChange:t,className:"filter__input",type:"text",name:"filter",id:E})})]})}));n(71);function R(e){var t=e.first,n=e.second,c=e.changeColor;return Object(w.jsxs)("div",{className:"counter-wrapper ".concat(t>=n&&c&&"counter-wrapper--overflowed"),children:[Object(w.jsx)("span",{children:t}),"/",Object(w.jsx)("span",{children:n})]})}var U=Object(d.b)((function(e){var t=e.contacts;return{filter:t.filter,filteredContacts:W(t.filter,t.items),contactsLength:t.items.length}}),null)((function(e){var t=e.filter,n=e.filteredContacts,c=e.contactsLength;return t&&Object(w.jsxs)("div",{className:"message__headline-wrapper",children:[Object(w.jsx)("h3",{className:"message__headline",children:0===n.length?"Oops, no contacts found":"Filtered results:"}),t&&Object(w.jsx)(R,{first:n.length,second:c})]})})),$=(n(72),document.querySelector("#root-modal")),G=function(e){return Object(r.createPortal)(Object(w.jsx)("div",{className:"Overlay",children:Object(w.jsx)("div",{className:"Modal",children:e.children})}),$)},K=n(34),Q=(n(73),n(74),function(){return Object(w.jsx)("div",{className:"loader",children:Object(w.jsx)(K.a,{height:"100",width:"100",color:"#4778ff",arialLabel:"Loading..."})})}),X=function(){return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(G,{children:Object(w.jsx)(Q,{})})})},Y=(n(75),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){p()}},{key:"render",value:function(){var e=this.props,t=e.error,n=e.loading,c=e.contactsLength;return Object(w.jsxs)(w.Fragment,{children:[n&&Object(w.jsx)(X,{}),t&&Object(w.jsx)("h2",{className:"error",children:t}),Object(w.jsxs)("div",{className:"phonebook__wrapper",children:[Object(w.jsxs)("div",{className:"form-wrapper",children:[Object(w.jsx)("h1",{className:"headline",children:"Phonebook"}),Object(w.jsx)("h2",{children:"Add new contact"}),Object(w.jsx)(I,{})]}),Object(w.jsxs)("div",{className:"list-wrapper",children:[Object(w.jsxs)("div",{className:"headline-wrapper",children:[Object(w.jsx)("h2",{children:"Contacts"}),Object(w.jsx)(R,{changeColor:!0,first:c,second:100})]}),Object(w.jsx)(T,{}),Object(w.jsx)(U,{}),Object(w.jsx)(Z,{})]})]})]})}}]),n}(c.Component)),ee=Object(d.b)((function(e){var t=e.contacts;return{loading:t.loading,error:t.error,contactsLength:t.items.length}}),null)(Y),te=Object(z.b)({contacts:V}),ne=Object(y.a)({reducer:te,devTools:!1});o.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(d.a,{store:ne,children:Object(w.jsx)(ee,{})})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.93cc8f00.chunk.js.map